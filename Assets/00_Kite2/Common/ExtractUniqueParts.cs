using System.Collections.Generic;
using System.Text.RegularExpressions;
using UnityEngine;

public class ExtractUniqueParts : MonoBehaviour
{
    void Start()
    {
        // Beispieltext
        string text = ":: StoryTitle\r\nTelefonat Notarin 0.4\r\n\r\n\r\n:: StoryData\r\n{\r\n  \"ifid\": \"C05F2F69-C105-44EC-929A-E7B49BEAB0BB\",\r\n  \"format\": \"Harlowe\",\r\n  \"format-version\": \"3.3.9\",\r\n  \"start\": \"Anfang\",\r\n  \"tag-colors\": {\r\n    \"Frage\": \"orange\",\r\n    \"Bias\": \"yellow\"\r\n  },\r\n  \"zoom\": 0.6\r\n}\r\n\r\n\r\n:: Anfang {\"position\":\"900,375\",\"size\":\"100,100\"}\r\n>>InfoNachrichtWirdAngezeigt:<<\r\nDu hast einen Termin mit einer Notarin, um einen Termin für deine Gründung auszumachen.\r\n>>--<<\r\n>>SoundAbspielen:telephoneCall<<\r\n\r\n[[Selbstvorstellung]]\r\n\r\n\r\n:: Bereits erwähnt {\"position\":\"900,575\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nAh, okay. Das Formular sende ich Ihnen zu. Nächsten Donnerstag 15 Uhr hätte ich noch einen Termin frei. Würde Ihnen das passen?\r\n\r\n[[Ja, das passt mir gut.->Termin Ja]]\r\n\r\n[[Würde auch Freitag 14 Uhr gehen?->Terminänderung]]\r\n\r\n[[Könnten Sie bitte bestätigen, dass Sie meine Position als Geschäftsführerin notiert haben? Es ist wichtig für den Eintrag ins Handelsregister, dass dies klar ist.->Bestätigung]]\r\n\r\n\r\n:: Bestätigung [Bias] {\"position\":\"775,725\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nJa, das ist bereits notiert. \r\n>>--<<\r\n>>Charakter01SprichtAstonished:<<\r\nDas ist schon außergewöhnlich, dass Sie gründen. Wer hat Ihnen denn bei der Gründung geholfen?\r\n>>--<<\r\n>>RelevanterBias:LeistungsattributionsBias<<\r\n\r\n[[Ich hatte keine Hilfe.->Selbstständig]] \r\n\r\n[[Ich habe mir Ratschläge von anderen eingeholt, aber gründen werde ich alleine.->Selbstständig]]\r\n\r\n[[Was meinen Sie mit dieser Frage?->Nachfrage]]\r\n\r\n\r\n:: Deeskalierend {\"position\":\"1775,875\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtCritical:<<\r\nIch sehe keinen Grund, das Geschlecht in den Vordergrund zu stellen. Es wäre einfacher, wenn Sie sich auf den Geschäftsprozess konzentrieren.\r\n\r\n\r\n[[Es geht nicht darum, das Geschlecht in den Vordergrund zu stellen, sondern um respektvolle und korrekte Kommunikation. Ich bitte Sie, das zu berücksichtigen.->Respektvolle Behandlung]]\r\n\r\n[[Wenn ich Sie darauf aufmerksam mache, dass es eine Geschäftsführerin und kein Geschäftsführer ist, bedeutet es nicht, dass ich Geschlecht in den Vordergrund stelle.->Frustriert]]\r\n\r\n\r\n:: Fragebogen [Bias] {\"position\":\"1200,375\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtFriendly:<<\r\nGuten Tag, bei einer Handelsregistereintragung muss als erstes immer ein Fragebogen ausgefüllt werden, in dem die für den Eintrag zentralen Fragen beantwortet werden. Wichtig ist auch, dass der Geschäftsführer anwesend ist, weil seine Unterschrift essentiell ist. \r\n>>--<<\r\n>>RelevanterBias:UnbewussteBiasInDerKommunikation<<\r\n\r\n[[Kein Problem, wie bereits erwähnt, ist es mein Unternehmen und ich bin die Geschäftsführerin.->Bereits erwähnt]]\r\n\r\n[[Die Geschäftsführerin bin ich und ich möchte auch als solche angesprochen werden!->Klarstellung]]\r\n\r\n\r\n:: Fragebogen zurückkommen {\"position\":\"1475,1025\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nAlso, ich kann Ihnen den Fragebogen zusenden und nächsten Donnerstag 15 Uhr hätte ich noch einen Termin frei. Würde Ihnen das passen?\r\n\r\n\r\n[[Ja, das passt mir gut.|Termin Ja]]\r\n\r\n[[Würde auch Freitag 14 Uhr gehen?|Terminänderung]]\r\n\r\n\r\n:: Frustriert {\"position\":\"1850,1025\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nWie Sie meinen. Also, wie erwähnt, kan ich Ihnen den Fragebogen zuschicken und nächsten Donnerstag 15 Uhr hätte ich noch einen Termin frei. Würde Ihnen das passen?\r\n\r\n\r\n[[Ja, das passt mir gut.|Termin Ja]]\r\n\r\n[[Würde auch Freitag 14 Uhr gehen?|Terminänderung]]\r\n\r\n[[Ich habe nicht das Gefühl, dass wir auf einen Nenner kommen und sehe mich doch lieber nach einer anderen Notarin um. Schönen Tag noch.->Gespräch beenden]]\r\n\r\n\r\n:: Geschlechtsannahme [Bias] {\"position\":\"1575,875\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtFriendly:<<\r\nIch verstehe Ihren Punkt und werde zukünftig darauf achten. In meiner Erfahrung übernehmen hauptsächlich Männer die Geschäftsführung.\r\n>>--<<\r\n>>RelevanterBias:Bestaetigungsverzerrung<<\r\n\r\n[[Unsere Erfahrungen nehmen selbstverständlich Einfluss auf unsere Wahrnehmung. Dennoch sollten alle respektvoll behandelt werden.->Respektvolle Behandlung]]\r\n\r\n[[Ihre Erfahrung ist nachvollziehbar, aber in diesem Fall sollte die professionelle Behandlung unabhängig vom Geschlecht erfolgen. Kommen wir doch zum Fragebogen zurück.->Fragebogen zurückkommen]]\r\n\r\n\r\n:: Gespräch beenden {\"position\":\"1700,1575\",\"size\":\"100,100\"}\r\n>>Ende<<\r\n\r\n\r\n:: Ja Zusenden {\"position\":\"1350,725\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nGut. Nächsten Donnerstag 15 Uhr hätte ich noch einen Termin frei. Würde Ihnen das passen?\r\n\r\n\r\n\r\n[[Ja, das passt mir gut.|Termin Ja]]\r\n\r\n[[Würde auch Freitag 14 Uhr gehen?|Terminänderung]]\r\n\r\n\r\n:: Klarstellung {\"position\":\"1500,575\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRefusing:<<\r\nWie auch immer. Wollen Sie den Fragebogen zugesendet bekommen?\r\n\r\n\r\n[[Ja, schicken Sie mir bitte den Fragebogen zu.->Ja Zusenden]]\r\n\r\n[[Es ist mir wichtig, dass meine Position als Geschäftsführerin korrekt anerkannt wird. Ich erwarte, in diesem Prozess angemessen behandelt zu werden.->Kritik]]\r\n\r\n\r\n:: Kritik {\"position\":\"1675,725\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRefusing:<<\r\nSie nehmen das zu persönlich. Geschlecht spielt keine Rolle. Das war nicht meine Absicht, Sie abzuwerten. Ich habe Ihre Position durchaus respektiert.\r\n\r\n\r\n[[Das Geschlecht spielt eine Rolle, weil Sie angenommen haben, dass die Geschäftsführung ein Mann übernimmt.->Geschlechtsannahme]]\r\n\r\n[[Ich weiß, es war nicht Ihre Absicht. Dennoch ist es wichtig, Missverständnisse zu vermeiden. Lassen Sie uns zusammen an diesem Prozess arbeiten.->Deeskalierend]]\r\n\r\n\r\n:: Nachfrage [Bias] {\"position\":\"675,875\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtCritical:<<\r\nNun ja, als Frau ist es deutlich schwieriger zu gründen. Alleine die Kapitalbeschaffung ist eine große Hürde! Ich würde Ihnen raten, sich einen Partner zu suchen.\r\n>>--<<\r\n>>RelevanterBias:Finanzierungszugang<<\r\n>>--<<\r\n>>RelevanterBias:UnterbewertungWeiblichGefuehrterUnternehmen<<\r\n\r\n[[Wenn ich einen Geschäftspartner haben wollen würde, hätte ich mir schon einen gesucht.->Rat Gereizt]]\r\n\r\n[[Danke für den Rat. Ich gründe allerdings bewusst alleine.->Rat]]\r\n\r\n\r\n:: Rat {\"position\":\"775,1025\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nKommen wir zurück zu dem Fragebogen. Wie gesagt, sende ich Ihnen die benötigten Formulare zu und nächsten Donnerstag 15 Uhr hätte ich noch einen Termin frei. Würde Ihnen das passen?\r\n\r\n[[Ja, das passt mir gut.->Termin Ja]]\r\n\r\n[[Würde auch Freitag 14 Uhr gehen?->Terminänderung]]\r\n\r\n\r\n:: Rat Gereizt [Bias] {\"position\":\"575,1025\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtAstonished:<<\r\nEs war ja nur ein gut gemeinter Rat. Da müssen Sie nicht gleich so zickig reagieren.\r\n>>--<<\r\n>>RelevanterBias:UnbewussteBiasInDerKommunikation<<\r\n>>--<<\r\n>>RelevanterBias:TightropeBias<<\r\n\r\n[[Ich gehe nicht mehr weiter darauf ein. Lassen Sie uns lieber einen Termin ausmachen.->Termin ausmachen]] \r\n\r\n[[Das war kein hilfreicher Rat, sondern eine unangemessene Bemerkung. Ich werde mich an eine andere Notarin wenden. Schönen Tag noch.->Gespräch beenden]]\r\n\r\n\r\n:: Respektvolle Behandlung {\"position\":\"1675,1025\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtQuestioning:<<\r\nInwiefern habe ich Sie denn nicht respektvoll behandelt?\r\n\r\n[[Nun, wenn sie auf meine Klarstellung mit \"Wie auch immer\" antworten, ist dies für mich keine respektvolle Behandlung.->Wie auch immer]]\r\n\r\n[[Wenn ich Ihnen selbst das erklären muss, sehe ich keinen Sinn darin mit Ihnen einen Termin zu vereinbaren. Machen Sie es gut.->Gespräch beenden]]\r\n\r\n\r\n:: Selbstständig {\"position\":\"875,875\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtAstonished:<<\r\nOh, so ist das. Nun gut. \r\n>>--<<\r\n>>Charakter01SprichtRelaxed:<<\r\nKommen wir zurück zu dem Fragebogen. Wie gesagt, sende ich Ihnen die benötigten Formulare zu und nächsten Donnerstag 15 Uhr hätte ich noch einen Termin frei. Würde Ihnen das passen?\r\n\r\n[[Ja, das passt mir gut.->Termin Ja]]\r\n\r\n[[Würde auch Freitag 14 Uhr gehen?->Terminänderung]]\r\n\r\n\r\n:: Selbstvorstellung [Frage] {\"position\":\"1050,375\",\"size\":\"100,100\"}\r\n>>FreitextEingabe<<\r\nSelbstvorstellungTelefonat: Guten Tag, mein Name ist...\r\n>>--<<\r\n>>SpielerinCharakterSpricht:<<\r\nGuten Tag, mein Name ist >SelbstvorstellungTelefonat<. Ich rufe an, weil ich mein Unternehmen gerne ins Handelregister eintragen lassen möchte.\r\n\r\n[[Fragebogen]]\r\n\r\n\r\n:: Termin Ja {\"position\":\"1325,1575\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtFriendly:<<\r\nSchön, bringen Sie dann das Formular bitte ausgefüllt wieder mit.\r\n>>--<<\r\n>>SpielerinCharakterSpricht:<<\r\nDas werde ich. Vielen Dank und bis dann!\r\n>>--<<\r\n>>Charakter01SprichtFriendly:<<\r\nSchönen Tag noch!\r\n>>--<<\r\n>>Ende<<\r\n\r\n\r\n:: Termin ausmachen {\"position\":\"1475,1350\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nWie erwähnt, kann ich Ihnen dann den Fragebogen zusenden und nächsten Donnerstag 15 Uhr hätte ich noch einen Termin frei. Würde Ihnen das passen?\r\n\r\n\r\n[[Ja, das passt mir gut.|Termin Ja]]\r\n\r\n[[Würde auch Freitag 14 Uhr gehen?|Terminänderung]]\r\n\r\n\r\n:: Terminänderung {\"position\":\"1125,1575\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtFriendly:<<\r\nJa, das würde auch passen. Bringen Sie dann das Formular bitte ausgefüllt wieder mit.\r\n>>--<<\r\n>>SpielerinCharakterSpricht:<<\r\nDas werde ich. Danke und bis dann!\r\n>>--<<\r\n>>Charakter01SprichtFriendly:<<\r\nSchönen Tag noch!\r\n>>--<<\r\n>>Ende<<\r\n\r\n\r\n:: Wie auch immer [Bias] {\"position\":\"1525,1175\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRefusing:<<\r\nVielleicht sollten Sie nicht so empfindlich auf jede Kleinigkeit reagieren. Wenn Sie so leicht gekränkt sind, könnte die Unternehmenswelt vielleicht doch nichts für Sie sein.\r\n>>--<<\r\n>>RelevanterBias:UnbewussteBiasInDerKommunikation<<\r\n>>--<<\r\n>>RelevanterBias:BiasInDerWahrnehmungVonFuehrungsfaehigkeiten<<\r\n\r\n[[Ich gehe nicht mehr weiter darauf ein. Lassen Sie uns lieber einen Termin ausmachen.->Termin ausmachen]] \r\n\r\n[[Ich sehe, dass eine respektvolle Zusammenarbeit hier nicht möglich ist. Ich werde mich an eine andere Notarin wenden. Schönen Tag noch.->Gespräch beenden]]\r\n";        // Liste mit eindeutigen Teilen
        List<string> uniqueParts = ExtractUniquePartsFromText(text);

        // Ausgabe der Liste in der Konsole
        foreach (string part in uniqueParts)
        {
            Debug.Log(part);
        }
    }

    List<string> ExtractUniquePartsFromText(string text)
    {
        // Regulärer Ausdruck, um die Teile zwischen >> und << zu finden
        MatchCollection matches = Regex.Matches(text, @">>(.+?)<<");

        // HashSet, um doppelte Einträge zu vermeiden
        HashSet<string> uniquePartsSet = new HashSet<string>();

        // Die gefundenen Teile zum HashSet hinzufügen
        foreach (Match match in matches)
        {
            uniquePartsSet.Add(">>" + match.Groups[1].Value + "<<");
        }

        // Das HashSet in eine Liste umwandeln und zurückgeben
        return new List<string>(uniquePartsSet);
    }
}
