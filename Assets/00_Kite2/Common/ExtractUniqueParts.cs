using System.Collections.Generic;
using System.Text.RegularExpressions;
using UnityEngine;

namespace _00_Kite2.Common
{
    public class ExtractUniqueParts : MonoBehaviour
    {
        private void Start()
        {
            // Beispieltext
            string text =
                ":: StoryTitle\r\nTelefonat Notarin 0.4\r\n\r\n\r\n:: StoryData\r\n{\r\n  \"ifid\": \"C05F2F69-C105-44EC-929A-E7B49BEAB0BB\",\r\n  \"format\": \"Harlowe\",\r\n  \"format-version\": \"3.3.9\",\r\n  \"start\": \"Anfang\",\r\n  \"tag-colors\": {\r\n    \"Frage\": \"orange\",\r\n    \"Bias\": \"yellow\"\r\n  },\r\n  \"zoom\": 0.6\r\n}\r\n\r\n\r\n:: Anfang {\"position\":\"900,375\",\"size\":\"100,100\"}\r\n>>InfoNachrichtWirdAngezeigt:<<\r\nDu hast einen Termin mit einer Notarin, um einen Termin für deine Gründung auszumachen.\r\n>>--<<\r\n>>SoundAbspielen:telephoneCall<<\r\n\r\n[[Selbstvorstellung]]\r\n\r\n\r\n:: Bereits erw�hnt {\"position\":\"900,575\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nAh, okay. Das Formular sende ich Ihnen zu. Nächsten Donnerstag 15 Uhr h�tte ich noch einen Termin frei. W�rde Ihnen das passen?\r\n\r\n[[Ja, das passt mir gut.->Termin Ja]]\r\n\r\n[[W�rde auch Freitag 14 Uhr gehen?->Termin�nderung]]\r\n\r\n[[K�nnten Sie bitte best�tigen, dass Sie meine Position als Gesch�ftsf�hrerin notiert haben? Es ist wichtig f�r den Eintrag ins Handelsregister, dass dies klar ist.->Best�tigung]]\r\n\r\n\r\n:: Best�tigung [Bias] {\"position\":\"775,725\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nJa, das ist bereits notiert. \r\n>>--<<\r\n>>Charakter01SprichtAstonished:<<\r\nDas ist schon au�ergew�hnlich, dass Sie gr�nden. Wer hat Ihnen denn bei der Gr�ndung geholfen?\r\n>>--<<\r\n>>RelevanterBias:LeistungsattributionsBias<<\r\n\r\n[[Ich hatte keine Hilfe.->Selbstst�ndig]] \r\n\r\n[[Ich habe mir Ratschl�ge von anderen eingeholt, aber gr�nden werde ich alleine.->Selbstst�ndig]]\r\n\r\n[[Was meinen Sie mit dieser Frage?->Nachfrage]]\r\n\r\n\r\n:: Deeskalierend {\"position\":\"1775,875\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtCritical:<<\r\nIch sehe keinen Grund, das Geschlecht in den Vordergrund zu stellen. Es w�re einfacher, wenn Sie sich auf den Gesch�ftsprozess konzentrieren.\r\n\r\n\r\n[[Es geht nicht darum, das Geschlecht in den Vordergrund zu stellen, sondern um respektvolle und korrekte Kommunikation. Ich bitte Sie, das zu ber�cksichtigen.->Respektvolle Behandlung]]\r\n\r\n[[Wenn ich Sie darauf aufmerksam mache, dass es eine Gesch�ftsf�hrerin und kein Gesch�ftsf�hrer ist, bedeutet es nicht, dass ich Geschlecht in den Vordergrund stelle.->Frustriert]]\r\n\r\n\r\n:: Fragebogen [Bias] {\"position\":\"1200,375\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtFriendly:<<\r\nGuten Tag, bei einer Handelsregistereintragung muss als erstes immer ein Fragebogen ausgef�llt werden, in dem die f�r den Eintrag zentralen Fragen beantwortet werden. Wichtig ist auch, dass der Gesch�ftsf�hrer anwesend ist, weil seine Unterschrift essentiell ist. \r\n>>--<<\r\n>>RelevanterBias:UnbewussteBiasInDerKommunikation<<\r\n\r\n[[Kein Problem, wie bereits erw�hnt, ist es mein Unternehmen und ich bin die Gesch�ftsf�hrerin.->Bereits erw�hnt]]\r\n\r\n[[Die Gesch�ftsf�hrerin bin ich und ich m�chte auch als solche angesprochen werden!->Klarstellung]]\r\n\r\n\r\n:: Fragebogen zur�ckkommen {\"position\":\"1475,1025\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nAlso, ich kann Ihnen den Fragebogen zusenden und n�chsten Donnerstag 15 Uhr h�tte ich noch einen Termin frei. W�rde Ihnen das passen?\r\n\r\n\r\n[[Ja, das passt mir gut.|Termin Ja]]\r\n\r\n[[W�rde auch Freitag 14 Uhr gehen?|Termin�nderung]]\r\n\r\n\r\n:: Frustriert {\"position\":\"1850,1025\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nWie Sie meinen. Also, wie erw�hnt, kan ich Ihnen den Fragebogen zuschicken und n�chsten Donnerstag 15 Uhr h�tte ich noch einen Termin frei. W�rde Ihnen das passen?\r\n\r\n\r\n[[Ja, das passt mir gut.|Termin Ja]]\r\n\r\n[[W�rde auch Freitag 14 Uhr gehen?|Termin�nderung]]\r\n\r\n[[Ich habe nicht das Gef�hl, dass wir auf einen Nenner kommen und sehe mich doch lieber nach einer anderen Notarin um. Sch�nen Tag noch.->Gespr�ch beenden]]\r\n\r\n\r\n:: Geschlechtsannahme [Bias] {\"position\":\"1575,875\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtFriendly:<<\r\nIch verstehe Ihren Punkt und werde zuk�nftig darauf achten. In meiner Erfahrung �bernehmen haupts�chlich M�nner die Gesch�ftsf�hrung.\r\n>>--<<\r\n>>RelevanterBias:Bestaetigungsverzerrung<<\r\n\r\n[[Unsere Erfahrungen nehmen selbstverst�ndlich Einfluss auf unsere Wahrnehmung. Dennoch sollten alle respektvoll behandelt werden.->Respektvolle Behandlung]]\r\n\r\n[[Ihre Erfahrung ist nachvollziehbar, aber in diesem Fall sollte die professionelle Behandlung unabh�ngig vom Geschlecht erfolgen. Kommen wir doch zum Fragebogen zur�ck.->Fragebogen zur�ckkommen]]\r\n\r\n\r\n:: Gespr�ch beenden {\"position\":\"1700,1575\",\"size\":\"100,100\"}\r\n>>Ende<<\r\n\r\n\r\n:: Ja Zusenden {\"position\":\"1350,725\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nGut. N�chsten Donnerstag 15 Uhr h�tte ich noch einen Termin frei. W�rde Ihnen das passen?\r\n\r\n\r\n\r\n[[Ja, das passt mir gut.|Termin Ja]]\r\n\r\n[[W�rde auch Freitag 14 Uhr gehen?|Termin�nderung]]\r\n\r\n\r\n:: Klarstellung {\"position\":\"1500,575\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRefusing:<<\r\nWie auch immer. Wollen Sie den Fragebogen zugesendet bekommen?\r\n\r\n\r\n[[Ja, schicken Sie mir bitte den Fragebogen zu.->Ja Zusenden]]\r\n\r\n[[Es ist mir wichtig, dass meine Position als Gesch�ftsf�hrerin korrekt anerkannt wird. Ich erwarte, in diesem Prozess angemessen behandelt zu werden.->Kritik]]\r\n\r\n\r\n:: Kritik {\"position\":\"1675,725\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRefusing:<<\r\nSie nehmen das zu pers�nlich. Geschlecht spielt keine Rolle. Das war nicht meine Absicht, Sie abzuwerten. Ich habe Ihre Position durchaus respektiert.\r\n\r\n\r\n[[Das Geschlecht spielt eine Rolle, weil Sie angenommen haben, dass die Gesch�ftsf�hrung ein Mann �bernimmt.->Geschlechtsannahme]]\r\n\r\n[[Ich wei�, es war nicht Ihre Absicht. Dennoch ist es wichtig, Missverst�ndnisse zu vermeiden. Lassen Sie uns zusammen an diesem Prozess arbeiten.->Deeskalierend]]\r\n\r\n\r\n:: Nachfrage [Bias] {\"position\":\"675,875\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtCritical:<<\r\nNun ja, als Frau ist es deutlich schwieriger zu gr�nden. Alleine die Kapitalbeschaffung ist eine gro�e H�rde! Ich w�rde Ihnen raten, sich einen Partner zu suchen.\r\n>>--<<\r\n>>RelevanterBias:Finanzierungszugang<<\r\n>>--<<\r\n>>RelevanterBias:UnterbewertungWeiblichGefuehrterUnternehmen<<\r\n\r\n[[Wenn ich einen Gesch�ftspartner haben wollen w�rde, h�tte ich mir schon einen gesucht.->Rat Gereizt]]\r\n\r\n[[Danke f�r den Rat. Ich gr�nde allerdings bewusst alleine.->Rat]]\r\n\r\n\r\n:: Rat {\"position\":\"775,1025\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nKommen wir zur�ck zu dem Fragebogen. Wie gesagt, sende ich Ihnen die ben�tigten Formulare zu und n�chsten Donnerstag 15 Uhr h�tte ich noch einen Termin frei. W�rde Ihnen das passen?\r\n\r\n[[Ja, das passt mir gut.->Termin Ja]]\r\n\r\n[[W�rde auch Freitag 14 Uhr gehen?->Termin�nderung]]\r\n\r\n\r\n:: Rat Gereizt [Bias] {\"position\":\"575,1025\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtAstonished:<<\r\nEs war ja nur ein gut gemeinter Rat. Da m�ssen Sie nicht gleich so zickig reagieren.\r\n>>--<<\r\n>>RelevanterBias:UnbewussteBiasInDerKommunikation<<\r\n>>--<<\r\n>>RelevanterBias:TightropeBias<<\r\n\r\n[[Ich gehe nicht mehr weiter darauf ein. Lassen Sie uns lieber einen Termin ausmachen.->Termin ausmachen]] \r\n\r\n[[Das war kein hilfreicher Rat, sondern eine unangemessene Bemerkung. Ich werde mich an eine andere Notarin wenden. Sch�nen Tag noch.->Gespr�ch beenden]]\r\n\r\n\r\n:: Respektvolle Behandlung {\"position\":\"1675,1025\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtQuestioning:<<\r\nInwiefern habe ich Sie denn nicht respektvoll behandelt?\r\n\r\n[[Nun, wenn sie auf meine Klarstellung mit \"Wie auch immer\" antworten, ist dies f�r mich keine respektvolle Behandlung.->Wie auch immer]]\r\n\r\n[[Wenn ich Ihnen selbst das erkl�ren muss, sehe ich keinen Sinn darin mit Ihnen einen Termin zu vereinbaren. Machen Sie es gut.->Gespr�ch beenden]]\r\n\r\n\r\n:: Selbstst�ndig {\"position\":\"875,875\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtAstonished:<<\r\nOh, so ist das. Nun gut. \r\n>>--<<\r\n>>Charakter01SprichtRelaxed:<<\r\nKommen wir zur�ck zu dem Fragebogen. Wie gesagt, sende ich Ihnen die ben�tigten Formulare zu und n�chsten Donnerstag 15 Uhr h�tte ich noch einen Termin frei. W�rde Ihnen das passen?\r\n\r\n[[Ja, das passt mir gut.->Termin Ja]]\r\n\r\n[[W�rde auch Freitag 14 Uhr gehen?->Termin�nderung]]\r\n\r\n\r\n:: Selbstvorstellung [Frage] {\"position\":\"1050,375\",\"size\":\"100,100\"}\r\n>>FreitextEingabe<<\r\nSelbstvorstellungTelefonat: Guten Tag, mein Name ist...\r\n>>--<<\r\n>>SpielerinCharakterSpricht:<<\r\nGuten Tag, mein Name ist >SelbstvorstellungTelefonat<. Ich rufe an, weil ich mein Unternehmen gerne ins Handelregister eintragen lassen m�chte.\r\n\r\n[[Fragebogen]]\r\n\r\n\r\n:: Termin Ja {\"position\":\"1325,1575\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtFriendly:<<\r\nSch�n, bringen Sie dann das Formular bitte ausgef�llt wieder mit.\r\n>>--<<\r\n>>SpielerinCharakterSpricht:<<\r\nDas werde ich. Vielen Dank und bis dann!\r\n>>--<<\r\n>>Charakter01SprichtFriendly:<<\r\nSch�nen Tag noch!\r\n>>--<<\r\n>>Ende<<\r\n\r\n\r\n:: Termin ausmachen {\"position\":\"1475,1350\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRelaxed:<<\r\nWie erw�hnt, kann ich Ihnen dann den Fragebogen zusenden und n�chsten Donnerstag 15 Uhr h�tte ich noch einen Termin frei. W�rde Ihnen das passen?\r\n\r\n\r\n[[Ja, das passt mir gut.|Termin Ja]]\r\n\r\n[[W�rde auch Freitag 14 Uhr gehen?|Termin�nderung]]\r\n\r\n\r\n:: Termin�nderung {\"position\":\"1125,1575\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtFriendly:<<\r\nJa, das w�rde auch passen. Bringen Sie dann das Formular bitte ausgef�llt wieder mit.\r\n>>--<<\r\n>>SpielerinCharakterSpricht:<<\r\nDas werde ich. Danke und bis dann!\r\n>>--<<\r\n>>Charakter01SprichtFriendly:<<\r\nSch�nen Tag noch!\r\n>>--<<\r\n>>Ende<<\r\n\r\n\r\n:: Wie auch immer [Bias] {\"position\":\"1525,1175\",\"size\":\"100,100\"}\r\n>>Charakter01SprichtRefusing:<<\r\nVielleicht sollten Sie nicht so empfindlich auf jede Kleinigkeit reagieren. Wenn Sie so leicht gekr�nkt sind, k�nnte die Unternehmenswelt vielleicht doch nichts f�r Sie sein.\r\n>>--<<\r\n>>RelevanterBias:UnbewussteBiasInDerKommunikation<<\r\n>>--<<\r\n>>RelevanterBias:BiasInDerWahrnehmungVonFuehrungsfaehigkeiten<<\r\n\r\n[[Ich gehe nicht mehr weiter darauf ein. Lassen Sie uns lieber einen Termin ausmachen.->Termin ausmachen]] \r\n\r\n[[Ich sehe, dass eine respektvolle Zusammenarbeit hier nicht m�glich ist. Ich werde mich an eine andere Notarin wenden. Sch�nen Tag noch.->Gespr�ch beenden]]\r\n"; // Liste mit eindeutigen Teilen
            List<string> uniqueParts = ExtractUniquePartsFromText(text);

            // Ausgabe der Liste in der Konsole
            foreach (string part in uniqueParts)
            {
                Debug.Log(part);
            }
        }

        private List<string> ExtractUniquePartsFromText(string text)
        {
            // Regulärer Ausdruck, um die Teile zwischen >> und << zu finden
            MatchCollection matches = Regex.Matches(text, @">>(.+?)<<");

            // HashSet, um doppelte Eintr�ge zu vermeiden
            HashSet<string> uniquePartsSet = new HashSet<string>();

            // Die gefundenen Teile zum HashSet hinzufügen
            foreach (Match match in matches)
            {
                uniquePartsSet.Add(">>" + match.Groups[1].Value + "<<");
            }

            // Das HashSet in eine Liste umwandeln und zurückgeben
            return new List<string>(uniquePartsSet);
        }
    }
}